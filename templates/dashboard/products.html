{% extends "dashboard_base.html" %}
{% load currency %}

{% block title %}Islington Ecommerce - Products{% endblock %}

{% block dashboard_content %}
    <div class="flex justify-between items-center mb-4">
        <h1 class="text-2xl font-bold text-[var(--clr-gray-900)]">My Products</h1>
        <button class="btn btn-primary"
                hx-get="{% url 'products:create' %}"
                hx-target="#modal-container"
                hx-trigger="click">
            + Add Product
        </button>
    </div>

    <div class="overflow-x-auto text-[var(--clr-gray-900)]">
        <table class="table w-full">
            <thead class="text-[var(--clr-gray-900)]">
            <tr>
                <th>Name</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody id="product-table-body">
            {% for product in products %}
                <tr id="product-{{ product.id }}">
                    <td>{{ product.name }}</td>
                    <td>{{ product.price|nepali_currency }}</td>
                    <td>{{ product.stock }}</td>
                    <td>
                        <button class="btn btn-sm btn-outline"
                                hx-get="{% url 'products:edit' product.id %}"
                                hx-target="#modal-container">
                            Edit
                        </button>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="4" class="text-center text-gray-500">No products yet</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <div id="modal-container"></div>
{% endblock %}
{% extends "dashboard_base.html" %}
{% load currency %}

{% block title %}Islington Marketplace - Orders{% endblock %}

{% block dashboard_content %}
    <div class="bg-[var(--clr-gray-00)]py-4">
        <h2 class="flex justify-between items-center uppercase text-[var(--clr-gray-900)] py-4 px-6 shadow-[0px_8px_40px_rgba(0_0_0_0.8)] border border-[var(--clr-gray-100)] rounded-t-sm backdrop-blur-md">
            Orders History
        </h2>

        <div class="overflow-x-auto rounded-b-sm">
            <table class="table border border-[var(--clr-gray-100)]">
                <thead class="bg-[var(--clr-gray-50)] ring-inset ring-1 ring-[var(--clr-gray-100)]">
                <tr class="text-[var(--clr-gray-700)] font-medium text-sm">
                    <th class="uppercase">Order ID</th>
                    <th class="uppercase">Status</th>
                    <th class="uppercase">Date</th>
                    <th class="uppercase">Sub-Total</th>
                    <th class="uppercase">Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for order in orders %}
                    <tr class="text-sm">
                        <td class="text-[var(--clr-gray-900)] font-medium">
                            {{ order.uuid }}
                        </td>
                        <td>
                            {% if order.status == "Completed" %}
                                <span class="text-[var(--clr-secondary-500)] uppercase font-semibold">{{ order.status }}</span>
                            {% else %}
                                <span class="text-[var(--clr-primary-500)] uppercase font-semibold">{{ order.status }}</span>
                            {% endif %}
                        </td>
                        <td class="text-[var(--clr-gray-600)]">
                            {{ order.created }}
                        </td>
                        <td class="text-[var(--clr-gray-700)]">
                            {{ order.total_amount|nepali_currency }}
                        </td>
                        <td>
                            <a href="{% url 'users:order-detail' order.uuid %}" class="text-[var(--clr-secondary-500)]">
                                View Detail
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        {% include 'partials/pagination.html' with page_obj=orders %}
    </div>
{% endblock %}
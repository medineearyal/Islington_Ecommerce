{% extends "base.html" %}
{% load static %}

{% block title %}Islington Marketplace - Blogs{% endblock %}

{% block content %}
    <section class="section-with-breadcrumb">
        {% include "partials/breadcrumb.html" %}
        <div class="container mx-auto">
            <div class="">
                <form method="get" id="search-filter-form" class="container mx-auto py-10 grid grid-cols-12 gap-6">
                    <div class="col-span-4 h-fit w-fit">
                        <div class="border border-[var(--clr-gray-100)] rounded-sm p-6 mb-6">
                            <h2 class="text-base font-medium mb-4 text-[var(--clr-gray-900)]">CATEGORY</h2>

                            <div class="mb-3 flex items-center">
                                <input type="radio"
                                       class="radio mr-2 bg-[var(--clr-gray-00)] border-[var(--clr-gray-200)] checked:bg-[var(--clr-primary-500)] checked:text-[var(--clr-gray-00)] checked:border-[var(--clr-primary-500)]"
                                       name="category" value="all" id="all"
                                       onclick="this.form.requestSubmit()"
                                        {% if request.GET.category == "all" %}
                                       checked
                                        {% endif %}
                                />
                                <label class="text-[var(--clr-gray-700)]" for="all">All</label>
                            </div>

                            {% for category in categories %}
                                <div class="mb-3 flex items-center">
                                    <input type="radio"
                                           class="radio mr-2 bg-[var(--clr-gray-00)] border-[var(--clr-gray-200)] checked:bg-[var(--clr-primary-500)] checked:text-[var(--clr-gray-00)] checked:border-[var(--clr-primary-500)]"
                                           name="category" value="{{ category.slug }}" id="{{ category }}"
                                           onclick="this.form.requestSubmit()"
                                            {% if category.is_active %}
                                           checked
                                            {% endif %}
                                    />
                                    <label class="text-[var(--clr-gray-700)]"
                                           for="{{ category }}">{{ category }}</label>
                                </div>
                            {% endfor %}
                        </div>

                        <div class="border border-[var(--clr-gray-100)] rounded-sm p-6">
                            <h2 class="text-base font-medium mb-6 text-[var(--clr-gray-900)] uppercase">Latest
                                Blogs</h2>

                            {% for blog in blogs|slice:":3:" %}
                                <div class="flex gap-4 items-center justify-between mb-6">
                                    {% if not blog.image %}
                                        <img src="{% static 'images/blog/blog_1.png' %}" alt="Blog"
                                             class="w-[104px] h-[80px] object-cover"/>
                                    {% else %}
                                        <img src="{{ blog.image.url }}" alt="Blog"
                                             class="w-[104px] h-[80px] object-cover"/>
                                    {% endif %}

                                    <div>
                                        <h3 class="text-sm text-[var(--clr-gray-900)] font-medium mb-2">{{ blog.name|truncatechars:50 }}</h3>
                                        <span class="text-[var(--clr-gray-500)] text-sm">{{ blog.created }}</span>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>


                    <div class="col-span-8">
                        <div class="flex justify-between items-center mb-6">
                            <label class="input bg-[var(--clr-gray-00)] border border-solid border-[var(--clr-gray-100)]">
                                <input type="search" class="grow text-black" name="blog-query"
                                       placeholder="Search For Anything"/>
                                <img src="{% static 'images/icons/Search.svg' %}" alt="Search Icon"/>
                            </label>

{#                            <div class="flex gap-2 items-center">#}
{#                                <label for="sort" class="text-[var(--clr-gray-900)] text-nowrap text-sm">Sort#}
{#                                    By:</label>#}
{#                                <select#}
{#                                        id="sort"#}
{#                                        class="select select-ghost text-[var(--clr-gray-700)] border border-[var(--clr-gray-100)] focus:bg-[var(--clr-gray-50)] focus:text-[var(--clr-gray-900)]"#}
{#                                        name="sort"#}
{#                                        onchange="this.form.requestSubmit()"#}
{#                                >#}
{#                                    {% for value, label in sort_choices %}#}
{#                                        <option value="{{ value }}"#}
{#                                                {% if value == sort %}selected{% endif %}>{{ label }}</option>#}
{#                                    {% endfor %}#}
{#                                </select>#}
{#                            </div>#}
                        </div>

                        <div class="grid grid-cols-2 gap-6">
                            {% for blog in blogs %}
                                {% include 'partials/blog/blog_card.html' with blog=blog %}
                            {% empty %}
                                {% include 'partials/empty_item.html' with item_name="Blogs" %}
                            {% endfor %}

                            {% if blogs.has_next or blogs.has_previous%}
                                <div class="col-span-full">
                                    {% include "partials/pagination.html" with page_obj=blogs %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
{% endblock %}